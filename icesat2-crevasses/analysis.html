
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Analyze the data &#8212; Jupyter Meets the Earth - Toy research workflows</title>
    
  <link rel="stylesheet" href="../_static/css/index.f658d18f9b420779cfdf24aa0a7e2d77.css">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      
  <link rel="stylesheet"
    href="../_static/vendor/open-sans_all/1.44.1/index.css">
  <link rel="stylesheet"
    href="../_static/vendor/lato_latin-ext/1.44.1/index.css">

    
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/sphinx-book-theme.c441f2ba0852f4cabcb80105e3a46ae6.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.d3f166471bb80abb5163.js">

    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/togglebutton.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/sphinx-book-theme.7d483ff0a819d6edff12ce0b1ead3928.js"></script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Generate publication-ready results" href="results.html" />
    <link rel="prev" title="Explore the data" href="explore.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />



  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="../index.html">
  
  <img src="../_static/jupyter-earth.png" class="logo" alt="logo">
  
  
  <h1 class="site-logo" id="site-title">Jupyter Meets the Earth - Toy research workflows</h1>
  
</a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form>
<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
    <ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../index.html">
   Jupyter Meets the Earth - A toy research workflow
  </a>
 </li>
</ul>
<ul class="current nav sidenav_l1">
 <li class="toctree-l1 current active collapsible-parent">
  <a class="reference internal" href="index.html">
   ICESat-2 sees glacier crevasses
  </a>
  <ul class="current collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="ideas.html">
     Search for ideas
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="getdata.html">
     Get data
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="explore.html">
     Explore the data
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     Analyze the data
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="results.html">
     Generate publication-ready results
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="writeup.html">
     Write a report
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="reproduce.html">
     Publish and reproduce the work
    </a>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
</ul>

</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../_sources/icesat2-crevasses/analysis.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->


            <!-- Full screen (wrap in <a> to have style consistency -->
            <a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
                    data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
                    title="Fullscreen mode"><i
                        class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/geostacks/toy-research-workflow/main?urlpath=lab/tree/docs/icesat2-crevasses/analysis.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
        <div class="tocsection onthispage pt-5 pb-3">
            <i class="fas fa-list"></i>
            Contents
        </div>
        <nav id="bd-toc-nav">
            <ul class="nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#steps">
   Steps
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#load-and-prepare-the-data">
     Load and prepare the data
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#use-xarray-to-handle-the-data">
     Use
     <code class="docutils literal notranslate">
      <span class="pre">
       xarray
      </span>
     </code>
     to handle the data
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#slice-the-data">
     Slice the data
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#examine-the-data-using-interactive-plots">
     Examine the data using interactive plots
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#analysis-point-density-and-crevasse-identification">
     Analysis: point density and crevasse identification
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#use-ipywidgets-to-compare-tests">
     Use
     <code class="docutils literal notranslate">
      <span class="pre">
       ipywidgets
      </span>
     </code>
     to compare tests
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#save-results">
     Save results
    </a>
   </li>
  </ul>
 </li>
</ul>

        </nav>
        
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="analyze-the-data">
<h1>Analyze the data<a class="headerlink" href="#analyze-the-data" title="Permalink to this headline">¶</a></h1>
<p>We are ready to conduct a simple analysis for crevass morphology. At this research stage, some of the key needs include</p>
<ol class="simple">
<li><p>choosing a good data structure for the following analysis and result storage</p></li>
<li><p>quick visualization of processing results</p></li>
<li><p>comparing different test results efficiently</p></li>
</ol>
<p>Here we will use two tools, one from the Pangeo ecosystem (<code class="docutils literal notranslate"><span class="pre">xarray</span></code>) and the other from the Jupter ecosystem (Jupyter widgets), and show how they assist data analysis by providing solutions to these needs.</p>
<!-- Remember this is a toy research workflow and the algorithm about crevass morphology we present here is pretty basic.  -->
<div class="tip admonition">
<p class="admonition-title">Goals</p>
<p>Analyze the ICESat-2 data we have downloaded and identify crevass locations on the glacier surface using a pretty basic algorithm.</p>
</div>
<div class="section" id="steps">
<h2>Steps<a class="headerlink" href="#steps" title="Permalink to this headline">¶</a></h2>
<div class="section" id="load-and-prepare-the-data">
<h3>Load and prepare the data<a class="headerlink" href="#load-and-prepare-the-data" title="Permalink to this headline">¶</a></h3>
<p>This step is replicated from the previous section. See <a class="reference internal" href="getdata.html"><span class="doc">Get data</span></a> for details.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">h5py</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="n">filename</span> <span class="o">=</span> <span class="s1">&#39;download/processed_ATL03_20190805232841_05940403_004_01.h5&#39;</span>

<span class="k">with</span> <span class="n">h5py</span><span class="o">.</span><span class="n">File</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">lon_ph</span> <span class="o">=</span> <span class="n">f</span><span class="p">[</span><span class="s1">&#39;gt1l&#39;</span><span class="p">][</span><span class="s1">&#39;heights&#39;</span><span class="p">][</span><span class="s1">&#39;lon_ph&#39;</span><span class="p">][:]</span>    <span class="c1"># photon longitude (x)</span>
    <span class="n">lat_ph</span> <span class="o">=</span> <span class="n">f</span><span class="p">[</span><span class="s1">&#39;gt1l&#39;</span><span class="p">][</span><span class="s1">&#39;heights&#39;</span><span class="p">][</span><span class="s1">&#39;lat_ph&#39;</span><span class="p">][:]</span>    <span class="c1"># photon latitude  (y)</span>
    <span class="n">h_ph</span> <span class="o">=</span> <span class="n">f</span><span class="p">[</span><span class="s1">&#39;gt1l&#39;</span><span class="p">][</span><span class="s1">&#39;heights&#39;</span><span class="p">][</span><span class="s1">&#39;h_ph&#39;</span><span class="p">][:]</span>        <span class="c1"># photon elevation (z), in m</span>
    <span class="n">dist_ph</span> <span class="o">=</span> <span class="n">f</span><span class="p">[</span><span class="s1">&#39;gt1l&#39;</span><span class="p">][</span><span class="s1">&#39;heights&#39;</span><span class="p">][</span><span class="s1">&#39;dist_ph_along&#39;</span><span class="p">][:]</span>            <span class="c1"># photon horizontal distance from the beginning of the parent segment, in m</span>
    <span class="n">seg_length</span> <span class="o">=</span> <span class="n">f</span><span class="p">[</span><span class="s1">&#39;gt1l&#39;</span><span class="p">][</span><span class="s1">&#39;geolocation&#39;</span><span class="p">][</span><span class="s1">&#39;segment_length&#39;</span><span class="p">][:]</span>    <span class="c1"># horizontal of each segment, in m</span>
    <span class="n">seg_ph_count</span> <span class="o">=</span> <span class="n">f</span><span class="p">[</span><span class="s1">&#39;gt1l&#39;</span><span class="p">][</span><span class="s1">&#39;geolocation&#39;</span><span class="p">][</span><span class="s1">&#39;segment_ph_cnt&#39;</span><span class="p">][:]</span>  <span class="c1"># photon count in each segment, in m</span>
    <span class="n">quality_ph</span> <span class="o">=</span> <span class="n">f</span><span class="p">[</span><span class="s1">&#39;gt1l&#39;</span><span class="p">][</span><span class="s1">&#39;heights&#39;</span><span class="p">][</span><span class="s1">&#39;signal_conf_ph&#39;</span><span class="p">][:,</span> <span class="mi">0</span><span class="p">]</span>     <span class="c1"># photon quality, 0 = noise, 2 = low, 3 = medium, 4 = high </span>

<span class="k">def</span> <span class="nf">make_dist_alongtrack</span><span class="p">(</span><span class="n">ph_count</span><span class="p">,</span> <span class="n">seg_length</span><span class="p">,</span> <span class="n">dist_ph</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    For detailed explanation of each variable and reasoning of the code, see ICESat-2 ATL03 documentation.</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="n">repeat_num</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cumsum</span><span class="p">(</span><span class="n">seg_length</span><span class="p">)</span> <span class="o">-</span> <span class="n">seg_length</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">dist_alongtrack</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="n">repeat_num</span><span class="p">,</span> <span class="n">ph_count</span><span class="p">)</span>
    <span class="n">dist_alongtrack</span> <span class="o">+=</span> <span class="n">dist_ph</span>
    <span class="k">return</span> <span class="n">dist_alongtrack</span>

<span class="n">dist_alongtrack</span> <span class="o">=</span> <span class="n">make_dist_alongtrack</span><span class="p">(</span><span class="n">seg_ph_count</span><span class="p">,</span> <span class="n">seg_length</span><span class="p">,</span> <span class="n">dist_ph</span><span class="p">)</span>   <span class="c1"># distance along track for each photon, in m</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="use-xarray-to-handle-the-data">
<h3>Use <code class="docutils literal notranslate"><span class="pre">xarray</span></code> to handle the data<a class="headerlink" href="#use-xarray-to-handle-the-data" title="Permalink to this headline">¶</a></h3>
<p>There are many closely related variables with different names. Since the variables we are interested in share the same array size (including <code class="docutils literal notranslate"><span class="pre">lat</span></code>, <code class="docutils literal notranslate"><span class="pre">lon</span></code>, <code class="docutils literal notranslate"><span class="pre">dist_alongtrack</span></code>, <code class="docutils literal notranslate"><span class="pre">h</span></code>, and <code class="docutils literal notranslate"><span class="pre">quality</span></code>), we can use <code class="docutils literal notranslate"><span class="pre">xarray</span></code> to group them together for the ease of the following analysis and plotting tasks.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">DataArray</span></code> class from <code class="docutils literal notranslate"><span class="pre">xarray</span></code> comes with handy methods for various tasks. Its plotting functionality is build on <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code>, so we can use <code class="docutils literal notranslate"><span class="pre">ipympl</span></code> widget again to generate interactive plots.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">matplotlib</span> widget
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">xarray</span> <span class="k">as</span> <span class="nn">xr</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
</pre></div>
</div>
</div>
</div>
<p>Now we can make an <code class="docutils literal notranslate"><span class="pre">xarray.DataArray</span></code> object using the variables above and some additional metadata:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">data_grouped</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">((</span><span class="n">h_ph</span><span class="p">,</span> <span class="n">lon_ph</span><span class="p">,</span> <span class="n">lat_ph</span><span class="p">,</span> <span class="n">quality_ph</span><span class="p">))</span>
<span class="n">labels</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;h&#39;</span><span class="p">,</span> <span class="s1">&#39;lon&#39;</span><span class="p">,</span> <span class="s1">&#39;lat&#39;</span><span class="p">,</span> <span class="s1">&#39;q&#39;</span><span class="p">]</span>
<span class="n">attrs</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;dataset&#39;</span><span class="p">:</span> <span class="s1">&#39;ATL03&#39;</span><span class="p">,</span> <span class="s1">&#39;glacier&#39;</span><span class="p">:</span> <span class="s1">&#39;Negribreen&#39;</span><span class="p">,</span> <span class="s1">&#39;RGT&#39;</span><span class="p">:</span> <span class="mi">594</span><span class="p">,</span> <span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;2019-08-05&#39;</span><span class="p">}</span>
<span class="n">da</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">DataArray</span><span class="p">(</span><span class="n">data_grouped</span><span class="p">,</span> <span class="n">coords</span><span class="o">=</span><span class="p">[</span><span class="n">labels</span><span class="p">,</span> <span class="n">dist_alongtrack</span><span class="p">],</span> <span class="n">dims</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;labels&quot;</span><span class="p">,</span> <span class="s2">&quot;dist_alongtrack&quot;</span><span class="p">],</span> <span class="n">attrs</span><span class="o">=</span><span class="n">attrs</span><span class="p">)</span>
<span class="n">da</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2 {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.DataArray (labels: 4, dist_alongtrack: 312012)&gt;
array([[ 819.36749268,  826.67175293,  462.56271362, ...,  293.02194214,
         -22.02213097, -205.87425232],
       [  18.47193949,   18.47194186,   18.47182369, ...,   18.29993139,
          18.29982727,   18.2997665 ],
       [  78.50008076,   78.50008053,   78.50009213, ...,   78.67477398,
          78.67478393,   78.67478974],
       [   0.        ,    0.        ,    4.        , ...,    0.        ,
           0.        ,    0.        ]])
Coordinates:
  * labels           (labels) &lt;U3 &#x27;h&#x27; &#x27;lon&#x27; &#x27;lat&#x27; &#x27;q&#x27;
  * dist_alongtrack  (dist_alongtrack) float64 0.1413 0.1058 ... 1.987e+04
Attributes:
    dataset:  ATL03
    glacier:  Negribreen
    RGT:      594
    date:     2019-08-05</pre><div class='xr-wrap' hidden><div class='xr-header'><div class='xr-obj-type'>xarray.DataArray</div><div class='xr-array-name'></div><ul class='xr-dim-list'><li><span class='xr-has-index'>labels</span>: 4</li><li><span class='xr-has-index'>dist_alongtrack</span>: 312012</li></ul></div><ul class='xr-sections'><li class='xr-section-item'><div class='xr-array-wrap'><input id='section-d6eb5add-8ed1-4ade-b3d3-16bfad588bb5' class='xr-array-in' type='checkbox' checked><label for='section-d6eb5add-8ed1-4ade-b3d3-16bfad588bb5' title='Show/hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-array-preview xr-preview'><span>819.4 826.7 462.6 461.8 462.3 462.2 461.9 ... 4.0 4.0 0.0 0.0 0.0 0.0</span></div><div class='xr-array-data'><pre>array([[ 819.36749268,  826.67175293,  462.56271362, ...,  293.02194214,
         -22.02213097, -205.87425232],
       [  18.47193949,   18.47194186,   18.47182369, ...,   18.29993139,
          18.29982727,   18.2997665 ],
       [  78.50008076,   78.50008053,   78.50009213, ...,   78.67477398,
          78.67478393,   78.67478974],
       [   0.        ,    0.        ,    4.        , ...,    0.        ,
           0.        ,    0.        ]])</pre></div></div></li><li class='xr-section-item'><input id='section-5aad77c1-8326-44e4-923d-73034d09d25a' class='xr-section-summary-in' type='checkbox'  checked><label for='section-5aad77c1-8326-44e4-923d-73034d09d25a' class='xr-section-summary' >Coordinates: <span>(2)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>labels</span></div><div class='xr-var-dims'>(labels)</div><div class='xr-var-dtype'>&lt;U3</div><div class='xr-var-preview xr-preview'>&#x27;h&#x27; &#x27;lon&#x27; &#x27;lat&#x27; &#x27;q&#x27;</div><input id='attrs-ecaaefc8-4302-497c-a30c-cef639e9ac6e' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-ecaaefc8-4302-497c-a30c-cef639e9ac6e' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-c6d4eb58-9f75-4a82-b7f5-8cbea8a8ca8e' class='xr-var-data-in' type='checkbox'><label for='data-c6d4eb58-9f75-4a82-b7f5-8cbea8a8ca8e' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([&#x27;h&#x27;, &#x27;lon&#x27;, &#x27;lat&#x27;, &#x27;q&#x27;], dtype=&#x27;&lt;U3&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>dist_alongtrack</span></div><div class='xr-var-dims'>(dist_alongtrack)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.1413 0.1058 ... 1.987e+04</div><input id='attrs-23f7428e-e497-4547-a24f-bc9abda85c6f' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-23f7428e-e497-4547-a24f-bc9abda85c6f' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-045c04b6-0c05-4a09-a6ff-5755bce8f9a4' class='xr-var-data-in' type='checkbox'><label for='data-045c04b6-0c05-4a09-a6ff-5755bce8f9a4' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([1.413464e-01, 1.057770e-01, 1.876492e+00, ..., 1.987020e+04,
       1.987173e+04, 1.987262e+04])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-eb29f96b-ae5a-4f31-9e73-722d43f101f7' class='xr-section-summary-in' type='checkbox'  checked><label for='section-eb29f96b-ae5a-4f31-9e73-722d43f101f7' class='xr-section-summary' >Attributes: <span>(4)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'><dt><span>dataset :</span></dt><dd>ATL03</dd><dt><span>glacier :</span></dt><dd>Negribreen</dd><dt><span>RGT :</span></dt><dd>594</dd><dt><span>date :</span></dt><dd>2019-08-05</dd></dl></div></li></ul></div></div></div></div>
</div>
<p>You can see that the <code class="docutils literal notranslate"><span class="pre">DataArray</span></code> class supports a rich representation, which shows not only data but also metadata we just enetered when simply typing the object name on the cell.</p>
</div>
<div class="section" id="slice-the-data">
<h3>Slice the data<a class="headerlink" href="#slice-the-data" title="Permalink to this headline">¶</a></h3>
<p>From the <a class="reference internal" href="explore.html#sec-explore-plot"><span class="std std-ref">previous stage</span></a>, we know that the crevasses are located at x values (<code class="docutils literal notranslate"><span class="pre">dist_alongtrack</span></code>) between 15090 and 16090. We can slice and retrieve only the data in between that range. The other advantage of using <code class="docutils literal notranslate"><span class="pre">xarray</span></code> for this task is that the metadata will be kept and passed to the new data subset.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">da_crevasse</span> <span class="o">=</span> <span class="n">da</span><span class="o">.</span><span class="n">where</span><span class="p">((</span><span class="mi">15090</span> <span class="o">&lt;</span> <span class="n">da</span><span class="o">.</span><span class="n">dist_alongtrack</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">da</span><span class="o">.</span><span class="n">dist_alongtrack</span> <span class="o">&lt;</span> <span class="mi">16090</span><span class="p">),</span> <span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">da_crevasse</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2 {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.DataArray (labels: 4, dist_alongtrack: 13686)&gt;
array([[-159.31948853, -156.37167358, -294.38366699, ...,  896.60644531,
         986.18243408,  896.69598389],
       [  18.34177156,   18.34177253,   18.34172716, ...,   18.33334928,
          18.33337263,   18.3333432 ],
       [  78.63275821,   78.63275811,   78.63276249, ...,   78.64154323,
          78.64154661,   78.64154945],
       [   0.        ,    0.        ,    0.        , ...,    0.        ,
           0.        ,    0.        ]])
Coordinates:
  * labels           (labels) &lt;U3 &#x27;h&#x27; &#x27;lon&#x27; &#x27;lat&#x27; &#x27;q&#x27;
  * dist_alongtrack  (dist_alongtrack) float64 1.509e+04 1.509e+04 ... 1.609e+04
Attributes:
    dataset:  ATL03
    glacier:  Negribreen
    RGT:      594
    date:     2019-08-05</pre><div class='xr-wrap' hidden><div class='xr-header'><div class='xr-obj-type'>xarray.DataArray</div><div class='xr-array-name'></div><ul class='xr-dim-list'><li><span class='xr-has-index'>labels</span>: 4</li><li><span class='xr-has-index'>dist_alongtrack</span>: 13686</li></ul></div><ul class='xr-sections'><li class='xr-section-item'><div class='xr-array-wrap'><input id='section-e2f9d421-1395-4f3f-b664-df1099b45a57' class='xr-array-in' type='checkbox' checked><label for='section-e2f9d421-1395-4f3f-b664-df1099b45a57' title='Show/hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-array-preview xr-preview'><span>-159.3 -156.4 -294.4 326.2 330.4 329.6 ... 0.0 0.0 2.0 0.0 0.0 0.0</span></div><div class='xr-array-data'><pre>array([[-159.31948853, -156.37167358, -294.38366699, ...,  896.60644531,
         986.18243408,  896.69598389],
       [  18.34177156,   18.34177253,   18.34172716, ...,   18.33334928,
          18.33337263,   18.3333432 ],
       [  78.63275821,   78.63275811,   78.63276249, ...,   78.64154323,
          78.64154661,   78.64154945],
       [   0.        ,    0.        ,    0.        , ...,    0.        ,
           0.        ,    0.        ]])</pre></div></div></li><li class='xr-section-item'><input id='section-a8392a2a-9210-4193-9a14-dc81a0d939aa' class='xr-section-summary-in' type='checkbox'  checked><label for='section-a8392a2a-9210-4193-9a14-dc81a0d939aa' class='xr-section-summary' >Coordinates: <span>(2)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>labels</span></div><div class='xr-var-dims'>(labels)</div><div class='xr-var-dtype'>&lt;U3</div><div class='xr-var-preview xr-preview'>&#x27;h&#x27; &#x27;lon&#x27; &#x27;lat&#x27; &#x27;q&#x27;</div><input id='attrs-4f503801-71d9-4578-85af-add2d1467a5e' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-4f503801-71d9-4578-85af-add2d1467a5e' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-78650d82-9860-4bf2-a6a3-1dc59643094d' class='xr-var-data-in' type='checkbox'><label for='data-78650d82-9860-4bf2-a6a3-1dc59643094d' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([&#x27;h&#x27;, &#x27;lon&#x27;, &#x27;lat&#x27;, &#x27;q&#x27;], dtype=&#x27;&lt;U3&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>dist_alongtrack</span></div><div class='xr-var-dims'>(dist_alongtrack)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>1.509e+04 1.509e+04 ... 1.609e+04</div><input id='attrs-0b27fe4e-1c44-4008-8c00-975c1693e952' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-0b27fe4e-1c44-4008-8c00-975c1693e952' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-afd75749-a81d-4167-8c16-64c9b3d5f986' class='xr-var-data-in' type='checkbox'><label for='data-afd75749-a81d-4167-8c16-64c9b3d5f986' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([15090.214811, 15090.200686, 15090.871387, ..., 16088.333564,
       16088.605281, 16089.040432])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-81b12cea-b228-4d35-b6f3-b30d74b77a34' class='xr-section-summary-in' type='checkbox'  checked><label for='section-81b12cea-b228-4d35-b6f3-b30d74b77a34' class='xr-section-summary' >Attributes: <span>(4)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'><dt><span>dataset :</span></dt><dd>ATL03</dd><dt><span>glacier :</span></dt><dd>Negribreen</dd><dt><span>RGT :</span></dt><dd>594</dd><dt><span>date :</span></dt><dd>2019-08-05</dd></dl></div></li></ul></div></div></div></div>
</div>
</div>
<div class="section" id="examine-the-data-using-interactive-plots">
<h3>Examine the data using interactive plots<a class="headerlink" href="#examine-the-data-using-interactive-plots" title="Permalink to this headline">¶</a></h3>
<p>Let’s quickly revisit the plot we did at the end of the <a class="reference internal" href="explore.html#sec-explore-plot"><span class="std std-ref">previous stage</span></a>, but this time using <code class="docutils literal notranslate"><span class="pre">xarray</span></code> and <code class="docutils literal notranslate"><span class="pre">ipympl</span></code>’s interactive plotting capabilities.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
<span class="n">da_crevasse</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;h&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">markersize</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="mi">320</span><span class="p">,</span> <span class="mi">363</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<script type="application/vnd.jupyter.widget-view+json">
{"model_id": "9cc6548df6c54d5eb8aac7d9f2bc9271", "version_major": 2, "version_minor": 0}
</script><div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(320.0, 363.0)
</pre></div>
</div>
</div>
</div>
<p>We can plot them using different colors based on the photon quality:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax2</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>

<span class="k">for</span> <span class="n">q_value</span><span class="p">,</span> <span class="n">q_label</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;noise&#39;</span><span class="p">,</span> <span class="s1">&#39;low&#39;</span><span class="p">,</span> <span class="s1">&#39;medium&#39;</span><span class="p">,</span> <span class="s1">&#39;high&#39;</span><span class="p">]):</span>
    <span class="n">da_crevasse</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">da_crevasse</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;q&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">q_value</span><span class="p">,</span> <span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;h&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax2</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">q_label</span><span class="p">,</span> <span class="n">markersize</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    
<span class="n">ax2</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="mi">320</span><span class="p">,</span> <span class="mi">363</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<script type="application/vnd.jupyter.widget-view+json">
{"model_id": "de1a4992157849d29bb260ffd35b3544", "version_major": 2, "version_minor": 0}
</script><div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;matplotlib.legend.Legend at 0x7fdba5ab9a30&gt;
</pre></div>
</div>
</div>
</div>
<p>Apparently, there are two groups with a high photon quality: the first group has an elevation between 340 and 350 m (ice surface), and the second group is lower, at 330 to 340 m (bottom of crevasses).</p>
</div>
<div class="section" id="analysis-point-density-and-crevasse-identification">
<h3>Analysis: point density and crevasse identification<a class="headerlink" href="#analysis-point-density-and-crevasse-identification" title="Permalink to this headline">¶</a></h3>
<p>DDA-ice uses point density to detect crevasses <span id="id1">[<a class="reference internal" href="ideas.html#id7"><span>HTL+21</span></a>]</span>. We adopt this idea and want to set up a simple strategy to identify crevass locations. Here’s the plan:</p>
<ol class="simple">
<li><p>Calculate kernel denstiry estimate using Scipy’s <a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.gaussian_kde.html">gaussian_kde</a> module.</p></li>
<li><p>Groups with a high kernel density and below the ice surface are identified as crevasses.</p></li>
</ol>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">scipy.stats</span> <span class="kn">import</span> <span class="n">gaussian_kde</span>
</pre></div>
</div>
</div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">gaussian_kde</span></code> module has an optinal argument called <code class="docutils literal notranslate"><span class="pre">bw_method</span></code>, which controls the estimator bandwidth. The ideal <code class="docutils literal notranslate"><span class="pre">bw_method</span></code> value generates a density peak at each bottom of crevasses. Let us start with an arbitrary value<br />
<code class="docutils literal notranslate"><span class="pre">0.005</span></code> and see what happens.</p>
<!-- If it is set too high, we will loose the resolution can only  -->
<!-- Larger `bw_method` value means the density is calculated within a large area.  --><div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="n">da_crevasse</span><span class="o">.</span><span class="n">dist_alongtrack</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">da_crevasse</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;h&#39;</span><span class="p">]</span>
<span class="n">xy</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">([</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">])</span>
<span class="n">z</span> <span class="o">=</span> <span class="n">gaussian_kde</span><span class="p">(</span><span class="n">xy</span><span class="p">,</span> <span class="n">bw_method</span><span class="o">=</span><span class="mf">0.005</span><span class="p">)(</span><span class="n">xy</span><span class="p">)</span>      <span class="c1"># kernel density estimate at each ICESat-2 photon point</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax3</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
<span class="n">ax3</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="n">z</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>   <span class="c1"># s is marker size</span>
<span class="n">ax3</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="mi">15090</span><span class="p">,</span> <span class="mi">16090</span><span class="p">)</span>
<span class="n">ax3</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="mi">320</span><span class="p">,</span> <span class="mi">363</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<script type="application/vnd.jupyter.widget-view+json">
{"model_id": "bda5ca2a9c1843059b2d3b8d4db8579b", "version_major": 2, "version_minor": 0}
</script><div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(320.0, 363.0)
</pre></div>
</div>
</div>
</div>
<p>Now points are rendered based on a color map. Brighter points means there are more points clustered together, suggesting a real detection at the air-ice boundary. Our question is, however, that whether <code class="docutils literal notranslate"><span class="pre">bw_method</span> <span class="pre">=</span> <span class="pre">0.005</span></code> is the best option for such a detection.</p>
</div>
<div class="section" id="use-ipywidgets-to-compare-tests">
<h3>Use <code class="docutils literal notranslate"><span class="pre">ipywidgets</span></code> to compare tests<a class="headerlink" href="#use-ipywidgets-to-compare-tests" title="Permalink to this headline">¶</a></h3>
<p>To test how <code class="docutils literal notranslate"><span class="pre">bw_method</span></code> affects the density peak detection, the traditional way is to make as many subplots as possible, assign a different <code class="docutils literal notranslate"><span class="pre">bw_method</span></code> for each subplot, and compare the results on one giant figure. With <code class="docutils literal notranslate"><span class="pre">ipywidgets</span></code>,</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">ipywidgets</span> <span class="k">as</span> <span class="nn">widgets</span>
</pre></div>
</div>
</div>
</div>
<p>we have a more flexible and interactive way as this code cell shows:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax4</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
<span class="n">ax4</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="n">z</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">ax4</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="mi">15090</span><span class="p">,</span> <span class="mi">16090</span><span class="p">)</span>
<span class="n">ax4</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="mi">320</span><span class="p">,</span> <span class="mi">363</span><span class="p">)</span>

<span class="n">slider</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">FloatLogSlider</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span> <span class="nb">min</span><span class="o">=-</span><span class="mi">4</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="mf">0.01</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">update_crevasse_kde</span><span class="p">():</span>
    <span class="n">z</span> <span class="o">=</span> <span class="n">gaussian_kde</span><span class="p">(</span><span class="n">xy</span><span class="p">,</span> <span class="n">bw_method</span><span class="o">=</span><span class="n">slider</span><span class="o">.</span><span class="n">value</span><span class="p">)(</span><span class="n">xy</span><span class="p">)</span>
    <span class="n">ax4</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
    <span class="n">ax4</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="n">z</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">ax4</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="mi">15090</span><span class="p">,</span> <span class="mi">16090</span><span class="p">)</span>
    <span class="n">ax4</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="mi">320</span><span class="p">,</span> <span class="mi">363</span><span class="p">)</span>

<span class="n">widgets</span><span class="o">.</span><span class="n">interact_manual</span><span class="p">(</span><span class="n">update_crevasse_kde</span><span class="p">,</span> <span class="n">i</span><span class="o">=</span><span class="n">slider</span><span class="p">)</span>
<span class="n">slider</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<script type="application/vnd.jupyter.widget-view+json">
{"model_id": "5cbc859262de4a23ae767586b0b79305", "version_major": 2, "version_minor": 0}
</script><script type="application/vnd.jupyter.widget-view+json">
{"model_id": "78b5b5a559f24b869fe6fcb810038fce", "version_major": 2, "version_minor": 0}
</script><script type="application/vnd.jupyter.widget-view+json">
{"model_id": "ea37833c38144bcdab5f078a75c96099", "version_major": 2, "version_minor": 0}
</script></div>
</div>
<p>There is a slider and a button along with this new figure. We can adjust the value of the slider, and when we click the “Run Interact” button, the slider value will be passed to <code class="docutils literal notranslate"><span class="pre">bw_method</span></code>, and the figure will be updated using the new kernel density estimates. We can repeat this step as many times as needed until we find satisfying results.</p>
</div>
<div class="section" id="save-results">
<h3>Save results<a class="headerlink" href="#save-results" title="Permalink to this headline">¶</a></h3>
<p>Suppose we think <code class="docutils literal notranslate"><span class="pre">0.007</span></code> is a good value for <code class="docutils literal notranslate"><span class="pre">bw_method</span></code> and run <code class="docutils literal notranslate"><span class="pre">gaussian_kde</span></code> one more time.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">z</span> <span class="o">=</span> <span class="n">gaussian_kde</span><span class="p">(</span><span class="n">xy</span><span class="p">,</span> <span class="n">bw_method</span><span class="o">=</span><span class="mf">0.007</span><span class="p">)(</span><span class="n">xy</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>This notebook will preserve every steps of the analysis, from the begining to this decision. We can concatenate the results with the original <code class="docutils literal notranslate"><span class="pre">DataArray</span></code> object and add additional metadata:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">da_z</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">DataArray</span><span class="p">([</span><span class="n">z</span><span class="p">],</span> <span class="n">coords</span><span class="o">=</span><span class="p">[[</span><span class="s1">&#39;kde&#39;</span><span class="p">],</span> <span class="n">da_crevasse</span><span class="o">.</span><span class="n">dist_alongtrack</span><span class="p">],</span> <span class="n">dims</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;labels&#39;</span><span class="p">,</span> <span class="s1">&#39;dist_alongtrack&#39;</span><span class="p">])</span>
<span class="n">da_results</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">da_crevasse</span><span class="p">,</span> <span class="n">da_z</span><span class="p">],</span> <span class="n">dim</span><span class="o">=</span><span class="s1">&#39;labels&#39;</span><span class="p">)</span>
<span class="n">da_results</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s1">&#39;kde_bw_method&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.007</span>
<span class="n">da_results</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2 {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.DataArray (labels: 5, dist_alongtrack: 13686)&gt;
array([[-1.59319489e+02, -1.56371674e+02, -2.94383667e+02, ...,
         8.96606445e+02,  9.86182434e+02,  8.96695984e+02],
       [ 1.83417716e+01,  1.83417725e+01,  1.83417272e+01, ...,
         1.83333493e+01,  1.83333726e+01,  1.83333432e+01],
       [ 7.86327582e+01,  7.86327581e+01,  7.86327625e+01, ...,
         7.86415432e+01,  7.86415466e+01,  7.86415494e+01],
       [ 0.00000000e+00,  0.00000000e+00,  0.00000000e+00, ...,
         0.00000000e+00,  0.00000000e+00,  0.00000000e+00],
       [ 3.89002717e-06,  3.89002767e-06,  2.91905388e-06, ...,
         5.66009124e-06,  2.91904350e-06,  5.66008990e-06]])
Coordinates:
  * labels           (labels) &lt;U3 &#x27;h&#x27; &#x27;lon&#x27; &#x27;lat&#x27; &#x27;q&#x27; &#x27;kde&#x27;
  * dist_alongtrack  (dist_alongtrack) float64 1.509e+04 1.509e+04 ... 1.609e+04
Attributes:
    dataset:        ATL03
    glacier:        Negribreen
    RGT:            594
    date:           2019-08-05
    kde_bw_method:  0.007</pre><div class='xr-wrap' hidden><div class='xr-header'><div class='xr-obj-type'>xarray.DataArray</div><div class='xr-array-name'></div><ul class='xr-dim-list'><li><span class='xr-has-index'>labels</span>: 5</li><li><span class='xr-has-index'>dist_alongtrack</span>: 13686</li></ul></div><ul class='xr-sections'><li class='xr-section-item'><div class='xr-array-wrap'><input id='section-27f99b38-3a2d-413c-ad2d-ea2b64e6d127' class='xr-array-in' type='checkbox' checked><label for='section-27f99b38-3a2d-413c-ad2d-ea2b64e6d127' title='Show/hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-array-preview xr-preview'><span>-159.3 -156.4 -294.4 326.2 ... 3.715e-06 5.66e-06 2.919e-06 5.66e-06</span></div><div class='xr-array-data'><pre>array([[-1.59319489e+02, -1.56371674e+02, -2.94383667e+02, ...,
         8.96606445e+02,  9.86182434e+02,  8.96695984e+02],
       [ 1.83417716e+01,  1.83417725e+01,  1.83417272e+01, ...,
         1.83333493e+01,  1.83333726e+01,  1.83333432e+01],
       [ 7.86327582e+01,  7.86327581e+01,  7.86327625e+01, ...,
         7.86415432e+01,  7.86415466e+01,  7.86415494e+01],
       [ 0.00000000e+00,  0.00000000e+00,  0.00000000e+00, ...,
         0.00000000e+00,  0.00000000e+00,  0.00000000e+00],
       [ 3.89002717e-06,  3.89002767e-06,  2.91905388e-06, ...,
         5.66009124e-06,  2.91904350e-06,  5.66008990e-06]])</pre></div></div></li><li class='xr-section-item'><input id='section-c796fa04-893c-45eb-8bfb-e5c0ec2612c7' class='xr-section-summary-in' type='checkbox'  checked><label for='section-c796fa04-893c-45eb-8bfb-e5c0ec2612c7' class='xr-section-summary' >Coordinates: <span>(2)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>labels</span></div><div class='xr-var-dims'>(labels)</div><div class='xr-var-dtype'>&lt;U3</div><div class='xr-var-preview xr-preview'>&#x27;h&#x27; &#x27;lon&#x27; &#x27;lat&#x27; &#x27;q&#x27; &#x27;kde&#x27;</div><input id='attrs-3aeefc72-16ee-40f2-afe6-015904a3e51e' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-3aeefc72-16ee-40f2-afe6-015904a3e51e' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-3128aa41-da73-4905-bc55-839f4a012e70' class='xr-var-data-in' type='checkbox'><label for='data-3128aa41-da73-4905-bc55-839f4a012e70' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([&#x27;h&#x27;, &#x27;lon&#x27;, &#x27;lat&#x27;, &#x27;q&#x27;, &#x27;kde&#x27;], dtype=&#x27;&lt;U3&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>dist_alongtrack</span></div><div class='xr-var-dims'>(dist_alongtrack)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>1.509e+04 1.509e+04 ... 1.609e+04</div><input id='attrs-82d1a820-206a-487c-a99e-a906f22cc177' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-82d1a820-206a-487c-a99e-a906f22cc177' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-eea0b3ba-9870-4275-8136-720d7fff48f5' class='xr-var-data-in' type='checkbox'><label for='data-eea0b3ba-9870-4275-8136-720d7fff48f5' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([15090.214811, 15090.200686, 15090.871387, ..., 16088.333564,
       16088.605281, 16089.040432])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-c9a2f4bc-a96a-44c4-b8b6-3cca474ff789' class='xr-section-summary-in' type='checkbox'  checked><label for='section-c9a2f4bc-a96a-44c4-b8b6-3cca474ff789' class='xr-section-summary' >Attributes: <span>(5)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'><dt><span>dataset :</span></dt><dd>ATL03</dd><dt><span>glacier :</span></dt><dd>Negribreen</dd><dt><span>RGT :</span></dt><dd>594</dd><dt><span>date :</span></dt><dd>2019-08-05</dd><dt><span>kde_bw_method :</span></dt><dd>0.007</dd></dl></div></li></ul></div></div></div></div>
</div>
<p>Now we can save this final object to disk (as a NetCDF file) for future use.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">da_results</span><span class="o">.</span><span class="n">to_netcdf</span><span class="p">(</span><span class="s1">&#39;download/ATL03_Negribreen_RGT594_2019-08-05.nc&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="admonition-summary admonition">
<p class="admonition-title">Summary</p>
<p>Using Pangeo and Jupyter tools, we show a data analysis workflow that is assisted with easy visualization and interactive comparison.</p>
</div>
<p id="id2"><dl class="citation">
<dt class="label" id="id4"><span class="brackets"><a class="fn-backref" href="#id1">HTL+21</a></span></dt>
<dd><p>Ute C. Herzfeld, Thomas Trantow, Matthew Lawson, Jacob Hans, and Gavin Medley. Surface heights and crevasse morphologies of surging and fast-moving glaciers from ICESat-2 laser altimeter data - Application of the density-dimension algorithm (DDA-ice) and evaluation using airborne altimeter and Planet SkySat data. <em>Science of Remote Sensing</em>, 3(May 2020):100013, 2021. URL: <a class="reference external" href="https://doi.org/10.1016/j.srs.2020.100013">https://doi.org/10.1016/j.srs.2020.100013</a>, <a class="reference external" href="https://doi.org/10.1016/j.srs.2020.100013">doi:10.1016/j.srs.2020.100013</a>.</p>
</dd>
</dl>
</p>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "conda-env-.conda-jme-py"
        },
        kernelOptions: {
            kernelName: "conda-env-.conda-jme-py",
            path: "./icesat2-crevasses"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'conda-env-.conda-jme-py'</script>

              </div>
              
        
        <div class='prev-next-bottom'>
            
    <a class='left-prev' id="prev-link" href="explore.html" title="previous page">Explore the data</a>
    <a class='right-next' id="next-link" href="results.html" title="next page">Generate publication-ready results</a>

        </div>
        
        </div>
    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By The Jupyter Book community<br/>
        
            &copy; Copyright 2020.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>

    
  <script src="../_static/js/index.d3f166471bb80abb5163.js"></script>


    
  </body>
</html>