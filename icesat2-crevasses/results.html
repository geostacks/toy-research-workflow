
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Generate publication-ready results &#8212; Jupyter Meets the Earth - Toy research workflows</title>
    
  <link rel="stylesheet" href="../_static/css/index.f658d18f9b420779cfdf24aa0a7e2d77.css">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      
  <link rel="stylesheet"
    href="../_static/vendor/open-sans_all/1.44.1/index.css">
  <link rel="stylesheet"
    href="../_static/vendor/lato_latin-ext/1.44.1/index.css">

    
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/sphinx-book-theme.c441f2ba0852f4cabcb80105e3a46ae6.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.d3f166471bb80abb5163.js">

    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/togglebutton.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/sphinx-book-theme.7d483ff0a819d6edff12ce0b1ead3928.js"></script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Write a report" href="writeup.html" />
    <link rel="prev" title="Analyze the data" href="analysis.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />



  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="../index.html">
  
  <img src="../_static/jupyter-earth.png" class="logo" alt="logo">
  
  
  <h1 class="site-logo" id="site-title">Jupyter Meets the Earth - Toy research workflows</h1>
  
</a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form>
<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
    <ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../index.html">
   Jupyter Meets the Earth - A toy research workflow
  </a>
 </li>
</ul>
<ul class="current nav sidenav_l1">
 <li class="toctree-l1 current active collapsible-parent">
  <a class="reference internal" href="index.html">
   ICESat-2 sees glacier crevasses
  </a>
  <ul class="current collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="ideas.html">
     Search for ideas
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="getdata.html">
     Get data
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="explore.html">
     Explore the data
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="analysis.html">
     Analyze the data
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     Generate publication-ready results
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="writeup.html">
     Write a report
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="reproduce.html">
     Reproducibility
    </a>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
</ul>

</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../_sources/icesat2-crevasses/results.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->


            <!-- Full screen (wrap in <a> to have style consistency -->
            <a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
                    data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
                    title="Fullscreen mode"><i
                        class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/geostacks/toy-research-workflow/main?urlpath=lab/tree/docs/icesat2-crevasses/results.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
        <div class="tocsection onthispage pt-5 pb-3">
            <i class="fas fa-list"></i>
            Contents
        </div>
        <nav id="bd-toc-nav">
            <ul class="nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#steps">
   Steps
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#load-the-data">
     Load the data
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#make-a-figure-using-an-advanced-plotting-tool">
     Make a figure using an advanced plotting tool
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#make-web-map-and-plot-geospatial-data">
     Make web map and plot geospatial data
    </a>
   </li>
  </ul>
 </li>
</ul>

        </nav>
        
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="generate-publication-ready-results">
<h1>Generate publication-ready results<a class="headerlink" href="#generate-publication-ready-results" title="Permalink to this headline">¶</a></h1>
<p>Compared to simple, interactive matplotlib or other widgets on a Jupyter Notebook, data presentation in a publication-ready format often requires more. For a figure, it should contain rich and adequate information and be self-explanatory with only little help from figure caption or other text. The type and the layers of such a figure are carefully chosen for readers to quickly comprehend. To make a good figure, we almost always have to revisit the code (or any app we use to generate it) and modify its content as many times as necessary. Thus, here we will introduce some tools from a broad ecosystem (such as various plotting libraries) and how to work with them using Jupyter tools for highly-customized figure making and the ease of future modification.</p>
<p>For geospatial data in Earth science, there has been a growing trend to present them in a form of web map, such as a Google map widget on a html page. This gives users more ways to naviagate through the data and investigate their spatial relationship. The Jupyter tools can help researchers make such a web map with only a few steps.</p>
<div class="tip admonition">
<p class="admonition-title">Goals</p>
<p>Use an advanced plotting library to generate publication-ready and web map-based figures of this “ICESat-2 sees glacier crevasses” study</p>
</div>
<div class="section" id="steps">
<h2>Steps<a class="headerlink" href="#steps" title="Permalink to this headline">¶</a></h2>
<div class="section" id="load-the-data">
<h3>Load the data<a class="headerlink" href="#load-the-data" title="Permalink to this headline">¶</a></h3>
<p>Firstly we need to load the results from the <a class="reference internal" href="analysis.html"><span class="doc">Analyze the data</span></a> section.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">xarray</span> <span class="k">as</span> <span class="nn">xr</span>

<span class="n">filename</span> <span class="o">=</span> <span class="s1">&#39;download/ATL03_Negribreen_RGT594_2019-08-05.nc&#39;</span>
<span class="n">results</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">open_dataarray</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
<span class="n">results</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2 {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.DataArray (labels: 5, dist_alongtrack: 13686)&gt;
array([[-1.593195e+02, -1.563717e+02, -2.943837e+02, ...,  8.966064e+02,
         9.861824e+02,  8.966960e+02],
       [ 1.834177e+01,  1.834177e+01,  1.834173e+01, ...,  1.833335e+01,
         1.833337e+01,  1.833334e+01],
       [ 7.863276e+01,  7.863276e+01,  7.863276e+01, ...,  7.864154e+01,
         7.864155e+01,  7.864155e+01],
       [ 0.000000e+00,  0.000000e+00,  0.000000e+00, ...,  0.000000e+00,
         0.000000e+00,  0.000000e+00],
       [ 3.890027e-06,  3.890028e-06,  2.919054e-06, ...,  5.660091e-06,
         2.919044e-06,  5.660090e-06]])
Coordinates:
  * labels           (labels) object &#x27;h&#x27; &#x27;lon&#x27; &#x27;lat&#x27; &#x27;q&#x27; &#x27;kde&#x27;
  * dist_alongtrack  (dist_alongtrack) float64 1.509e+04 1.509e+04 ... 1.609e+04
Attributes:
    dataset:        ATL03
    glacier:        Negribreen
    RGT:            594
    date:           2019-08-05
    kde_bw_method:  0.007</pre><div class='xr-wrap' hidden><div class='xr-header'><div class='xr-obj-type'>xarray.DataArray</div><div class='xr-array-name'></div><ul class='xr-dim-list'><li><span class='xr-has-index'>labels</span>: 5</li><li><span class='xr-has-index'>dist_alongtrack</span>: 13686</li></ul></div><ul class='xr-sections'><li class='xr-section-item'><div class='xr-array-wrap'><input id='section-e4cff7ae-307b-4021-bc59-6da513d281c8' class='xr-array-in' type='checkbox' checked><label for='section-e4cff7ae-307b-4021-bc59-6da513d281c8' title='Show/hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-array-preview xr-preview'><span>-159.3 -156.4 -294.4 326.2 ... 3.715e-06 5.66e-06 2.919e-06 5.66e-06</span></div><div class='xr-array-data'><pre>array([[-1.593195e+02, -1.563717e+02, -2.943837e+02, ...,  8.966064e+02,
         9.861824e+02,  8.966960e+02],
       [ 1.834177e+01,  1.834177e+01,  1.834173e+01, ...,  1.833335e+01,
         1.833337e+01,  1.833334e+01],
       [ 7.863276e+01,  7.863276e+01,  7.863276e+01, ...,  7.864154e+01,
         7.864155e+01,  7.864155e+01],
       [ 0.000000e+00,  0.000000e+00,  0.000000e+00, ...,  0.000000e+00,
         0.000000e+00,  0.000000e+00],
       [ 3.890027e-06,  3.890028e-06,  2.919054e-06, ...,  5.660091e-06,
         2.919044e-06,  5.660090e-06]])</pre></div></div></li><li class='xr-section-item'><input id='section-644a1864-5dcf-43fa-af65-2c247f3807f9' class='xr-section-summary-in' type='checkbox'  checked><label for='section-644a1864-5dcf-43fa-af65-2c247f3807f9' class='xr-section-summary' >Coordinates: <span>(2)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>labels</span></div><div class='xr-var-dims'>(labels)</div><div class='xr-var-dtype'>object</div><div class='xr-var-preview xr-preview'>&#x27;h&#x27; &#x27;lon&#x27; &#x27;lat&#x27; &#x27;q&#x27; &#x27;kde&#x27;</div><input id='attrs-997ac08a-4b37-4fd2-84d5-d57d20fde5ad' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-997ac08a-4b37-4fd2-84d5-d57d20fde5ad' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-24fb6030-dfa3-44c5-83c2-08b20de1adc3' class='xr-var-data-in' type='checkbox'><label for='data-24fb6030-dfa3-44c5-83c2-08b20de1adc3' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([&#x27;h&#x27;, &#x27;lon&#x27;, &#x27;lat&#x27;, &#x27;q&#x27;, &#x27;kde&#x27;], dtype=object)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>dist_alongtrack</span></div><div class='xr-var-dims'>(dist_alongtrack)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>1.509e+04 1.509e+04 ... 1.609e+04</div><input id='attrs-4155a2ab-2a8d-4fd9-b966-b457749fb32c' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-4155a2ab-2a8d-4fd9-b966-b457749fb32c' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-37449aeb-442d-49da-ba55-9fe128d9b518' class='xr-var-data-in' type='checkbox'><label for='data-37449aeb-442d-49da-ba55-9fe128d9b518' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([15090.214811, 15090.200686, 15090.871387, ..., 16088.333564,
       16088.605281, 16089.040432])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-069d3d98-2d5f-4c7d-a993-b97d4438d649' class='xr-section-summary-in' type='checkbox'  checked><label for='section-069d3d98-2d5f-4c7d-a993-b97d4438d649' class='xr-section-summary' >Attributes: <span>(5)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'><dt><span>dataset :</span></dt><dd>ATL03</dd><dt><span>glacier :</span></dt><dd>Negribreen</dd><dt><span>RGT :</span></dt><dd>594</dd><dt><span>date :</span></dt><dd>2019-08-05</dd><dt><span>kde_bw_method :</span></dt><dd>0.007</dd></dl></div></li></ul></div></div></div></div>
</div>
</div>
<div class="section" id="make-a-figure-using-an-advanced-plotting-tool">
<h3>Make a figure using an advanced plotting tool<a class="headerlink" href="#make-a-figure-using-an-advanced-plotting-tool" title="Permalink to this headline">¶</a></h3>
<p>Jupyter Notebook works well with various plotting tools. For a Python kernel, there is a wide selection such as Matplotlib, seaborn, Plotly, Bokeh, and holoviews. There are also libraries designed specifically for plotting geospatial data, including Cartopy and PyGMT. Here we will choose <code class="docutils literal notranslate"><span class="pre">seaborn</span></code> and visualize the results of crevasse analysis.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>    <span class="c1"># for detailed axis settings</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>              <span class="c1"># for plotting on a matplotlib axis</span>
</pre></div>
</div>
</div>
</div>
<p>To downsize the code line length, we use these aliases:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="n">results</span><span class="o">.</span><span class="n">dist_alongtrack</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">results</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;h&#39;</span><span class="p">]</span>
<span class="n">q</span> <span class="o">=</span> <span class="n">results</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;q&#39;</span><span class="p">]</span>
<span class="n">kde</span> <span class="o">=</span> <span class="n">results</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;kde&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<p>The advantages of using <code class="docutils literal notranslate"><span class="pre">seaborn</span></code> (as well as the other advanced ploting tools) include:</p>
<ul class="simple">
<li><p>Abundant presets of plotting type. For example, seaborn has a <code class="docutils literal notranslate"><span class="pre">kdeplot</span></code> function that makes you plot kernel density estimates with little settings.</p></li>
<li><p>Multiple perceptually uniform color maps (good for numeric data comparison) are available and ready to use.</p></li>
<li><p>Flexibility: we can simply follow a preset or highly customize every details on the figure.</p></li>
<li><p>Some of the plotting libraries support advanced interactive visualization. For example, Bokeh has a “panel” functionality that links all the subplots of a figure and update them according to user input.</p></li>
</ul>
<p>Now we start to use seaborn and plot the ICESat-2 elevation profile again, but this time we select a different preset colormap and add more details onto the figure.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">14</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>

<span class="n">sns</span><span class="o">.</span><span class="n">scatterplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="n">kde</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="s1">&#39;crest&#39;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>
<span class="c1"># sns.scatterplot(x=x[kde &gt; 0.0001], y=y[kde &gt; 0.0001], s=5, color=&#39;r&#39;, ax=ax)</span>
<span class="c1"># sns.kdeplot(x=x[q == 4], y=y[q == 4], levels=2, color=&quot;.15&quot;, linewidths=1, bw_method=0.007, ax=ax)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="mi">15090</span><span class="p">,</span> <span class="mi">16090</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="mi">320</span><span class="p">,</span> <span class="mi">363</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Along-Track distance (m)&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Elevation (m)&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Gaussian kernel density&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;matplotlib.legend.Legend at 0x7fbe3be61040&gt;
</pre></div>
</div>
<img alt="../_images/results_7_1.png" src="../_images/results_7_1.png" />
</div>
</div>
<p>This perceptually uniform color map (<code class="docutils literal notranslate"><span class="pre">crest</span></code>) highlights the bottom of the crevasses with dark colors. It saves us a lot of time find the right way to convey our results.</p>
<p>Since this is a toy research workflow, we will stop here but welcome you to explore more. For example, you can uncomment the <code class="docutils literal notranslate"><span class="pre">sns.kdeplot</span></code> command or the other <code class="docutils literal notranslate"><span class="pre">sns.scatterplot</span></code> in the above cell and see what will change. You can also try to curve fit the ice surface and plot it on the same figure. This cell will serve as the entry point whenever you need to update the figure.</p>
</div>
<div class="section" id="make-web-map-and-plot-geospatial-data">
<h3>Make web map and plot geospatial data<a class="headerlink" href="#make-web-map-and-plot-geospatial-data" title="Permalink to this headline">¶</a></h3>
<p>Compared to a traditional map, a web map provides much more ample room to explore the data because the map scale and boundary are not fixed. As its name suggests, a web map can also be easily embedded on a web page along with information such as caption and other figures. The <code class="docutils literal notranslate"><span class="pre">ipyleaflet</span></code> tool makes Jupyter Notebook able to make and display such a map. In our case, we also need <code class="docutils literal notranslate"><span class="pre">pandas</span></code> and <code class="docutils literal notranslate"><span class="pre">geopandas</span></code> to help prepare the ipyleaflet-readable data.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">ipyleaflet</span> <span class="k">as</span> <span class="nn">ilfl</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">geopandas</span> <span class="k">as</span> <span class="nn">gpd</span>
</pre></div>
</div>
</div>
</div>
<p>To begin, we have to translate necessary information stored as the <code class="docutils literal notranslate"><span class="pre">xarray.DataArray</span></code> to the <code class="docutils literal notranslate"><span class="pre">geopandas.DataFrame</span></code> object. We only select points with <code class="docutils literal notranslate"><span class="pre">kde</span> <span class="pre">&gt;</span> <span class="pre">0.0001</span></code> to avoid too many points being plotted and highlight crevasse locations.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Translate lat, lon, h, and kde into Pandas Series</span>
<span class="n">kde_series</span> <span class="o">=</span> <span class="n">kde</span><span class="p">[</span><span class="n">kde</span> <span class="o">&gt;</span> <span class="mf">0.0001</span><span class="p">]</span><span class="o">.</span><span class="n">to_series</span><span class="p">()</span>
<span class="n">h_series</span>   <span class="o">=</span> <span class="n">y</span><span class="p">[</span><span class="n">kde</span> <span class="o">&gt;</span> <span class="mf">0.0001</span><span class="p">]</span><span class="o">.</span><span class="n">to_series</span><span class="p">()</span>
<span class="n">lat_series</span> <span class="o">=</span> <span class="n">results</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;lat&#39;</span><span class="p">][</span><span class="n">kde</span> <span class="o">&gt;</span> <span class="mf">0.0001</span><span class="p">]</span><span class="o">.</span><span class="n">to_series</span><span class="p">()</span>
<span class="n">lon_series</span> <span class="o">=</span> <span class="n">results</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;lon&#39;</span><span class="p">][</span><span class="n">kde</span> <span class="o">&gt;</span> <span class="mf">0.0001</span><span class="p">]</span><span class="o">.</span><span class="n">to_series</span><span class="p">()</span>

<span class="c1"># Concatenate Series to Pandas DataFrame, and then convert it to Geopandas DataFrame</span>
<span class="n">results_pd</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">lat_series</span><span class="p">,</span> <span class="n">lon_series</span><span class="p">,</span> <span class="n">h_series</span><span class="p">,</span> <span class="n">kde_series</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">keys</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;lat&quot;</span><span class="p">,</span> <span class="s2">&quot;lon&quot;</span><span class="p">,</span> <span class="s2">&quot;elev&quot;</span><span class="p">,</span> <span class="s2">&quot;kde&quot;</span><span class="p">])</span>
<span class="n">results_gpd</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="p">(</span><span class="n">results_pd</span><span class="p">,</span> <span class="n">geometry</span><span class="o">=</span><span class="n">gpd</span><span class="o">.</span><span class="n">points_from_xy</span><span class="p">(</span><span class="n">results_pd</span><span class="p">[</span><span class="s1">&#39;lon&#39;</span><span class="p">],</span> <span class="n">results_pd</span><span class="p">[</span><span class="s1">&#39;lat&#39;</span><span class="p">]),</span> <span class="n">crs</span><span class="o">=</span><span class="s1">&#39;EPSG:4326&#39;</span><span class="p">)</span>
<span class="n">results_gpd</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>lat</th>
      <th>lon</th>
      <th>elev</th>
      <th>kde</th>
      <th>geometry</th>
    </tr>
    <tr>
      <th>dist_alongtrack</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>15094.237983</th>
      <td>78.632799</td>
      <td>18.341878</td>
      <td>330.312836</td>
      <td>0.000103</td>
      <td>POINT (18.34188 78.63280)</td>
    </tr>
    <tr>
      <th>15094.236413</th>
      <td>78.632799</td>
      <td>18.341878</td>
      <td>330.583557</td>
      <td>0.000102</td>
      <td>POINT (18.34188 78.63280)</td>
    </tr>
    <tr>
      <th>15094.237590</th>
      <td>78.632799</td>
      <td>18.341878</td>
      <td>330.367828</td>
      <td>0.000103</td>
      <td>POINT (18.34188 78.63280)</td>
    </tr>
    <tr>
      <th>15094.240338</th>
      <td>78.632799</td>
      <td>18.341878</td>
      <td>329.816895</td>
      <td>0.000100</td>
      <td>POINT (18.34188 78.63280)</td>
    </tr>
    <tr>
      <th>15094.947009</th>
      <td>78.632805</td>
      <td>18.341872</td>
      <td>330.744446</td>
      <td>0.000107</td>
      <td>POINT (18.34187 78.63281)</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>15961.124685</th>
      <td>78.640419</td>
      <td>18.334298</td>
      <td>351.996979</td>
      <td>0.000103</td>
      <td>POINT (18.33430 78.64042)</td>
    </tr>
    <tr>
      <th>15961.123505</th>
      <td>78.640419</td>
      <td>18.334298</td>
      <td>352.216827</td>
      <td>0.000102</td>
      <td>POINT (18.33430 78.64042)</td>
    </tr>
    <tr>
      <th>15961.839789</th>
      <td>78.640425</td>
      <td>18.334292</td>
      <td>352.051514</td>
      <td>0.000102</td>
      <td>POINT (18.33429 78.64043)</td>
    </tr>
    <tr>
      <th>15961.840972</th>
      <td>78.640425</td>
      <td>18.334292</td>
      <td>351.754547</td>
      <td>0.000102</td>
      <td>POINT (18.33429 78.64043)</td>
    </tr>
    <tr>
      <th>15961.840184</th>
      <td>78.640425</td>
      <td>18.334292</td>
      <td>351.950104</td>
      <td>0.000102</td>
      <td>POINT (18.33429 78.64043)</td>
    </tr>
  </tbody>
</table>
<p>383 rows × 5 columns</p>
</div></div></div>
</div>
<p>Using <code class="docutils literal notranslate"><span class="pre">ipyleaflet.Map</span></code> and <code class="docutils literal notranslate"><span class="pre">ipyleaflet.GeoData</span></code> classes, now we can plot crevasse locations (points with <code class="docutils literal notranslate"><span class="pre">kde</span> <span class="pre">&gt;</span> <span class="pre">0.0001</span></code>) on a web map:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">zoom</span> <span class="o">=</span> <span class="mi">9</span>                                                               <span class="c1"># initial zoom level</span>
<span class="n">center</span> <span class="o">=</span> <span class="p">[</span><span class="nb">float</span><span class="p">(</span><span class="n">results</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;lat&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]),</span> <span class="nb">float</span><span class="p">(</span><span class="n">results</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;lon&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])]</span>  <span class="c1"># initial map center</span>

<span class="c1"># Generate leaflet map </span>
<span class="n">m</span> <span class="o">=</span> <span class="n">ilfl</span><span class="o">.</span><span class="n">Map</span><span class="p">(</span><span class="n">basemap</span><span class="o">=</span><span class="n">ilfl</span><span class="o">.</span><span class="n">basemaps</span><span class="o">.</span><span class="n">Esri</span><span class="o">.</span><span class="n">WorldImagery</span><span class="p">,</span> <span class="n">center</span><span class="o">=</span><span class="n">center</span><span class="p">,</span> <span class="n">zoom</span><span class="o">=</span><span class="n">zoom</span><span class="p">)</span>
<span class="c1"># Generate and add GeoData on the map</span>
<span class="n">geo_data</span> <span class="o">=</span> <span class="n">ilfl</span><span class="o">.</span><span class="n">GeoData</span><span class="p">(</span><span class="n">geo_dataframe</span> <span class="o">=</span> <span class="n">results_gpd</span><span class="p">,</span>
    <span class="n">style</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;color&#39;</span><span class="p">:</span> <span class="s1">&#39;#00203f&#39;</span><span class="p">,</span> <span class="s1">&#39;radius&#39;</span><span class="p">:</span><span class="mi">5</span><span class="p">},</span>
    <span class="n">point_style</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;fillColor&#39;</span><span class="p">:</span> <span class="s1">&#39;#adefd1&#39;</span><span class="p">})</span>
<span class="n">m</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="n">geo_data</span><span class="p">)</span>

<span class="n">m</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<script type="application/vnd.jupyter.widget-view+json">
{"model_id": "93d1490aabc94a7c916f8e6f6ae23142", "version_major": 2, "version_minor": 0}
</script></div>
</div>
<p>You can furthur zoom in, separate the points, and compare crevass distributions from our results with the crevasses seen on the base satellite map.</p>
<div class="admonition-summary admonition">
<p class="admonition-title">Summary</p>
<p>We work with advanced plotting and web map tools to generate figures or html panels with publication quality.</p>
</div>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "conda-env-.conda-jme-py"
        },
        kernelOptions: {
            kernelName: "conda-env-.conda-jme-py",
            path: "./icesat2-crevasses"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'conda-env-.conda-jme-py'</script>

              </div>
              
        
        <div class='prev-next-bottom'>
            
    <a class='left-prev' id="prev-link" href="analysis.html" title="previous page">Analyze the data</a>
    <a class='right-next' id="next-link" href="writeup.html" title="next page">Write a report</a>

        </div>
        
        </div>
    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By The Jupyter Book community<br/>
        
            &copy; Copyright 2020.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>

    
  <script src="../_static/js/index.d3f166471bb80abb5163.js"></script>


    
  </body>
</html>